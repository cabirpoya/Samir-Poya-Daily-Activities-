<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±ÙˆØ²Ø§Ù†Ù‡ ÙØ±Ø²Ù†Ø¯Ù…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Noto Naskh Arabic', serif;
        }
        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .progress-ring__circle {
            transition: stroke-dashoffset 0.5s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gradient-to-b from-blue-50 to-purple-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-purple-800 mb-2">Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø³ÛŒØ¯ Ø³Ù…ÛŒØ±</h1>
            <p class="text-lg text-gray-600">ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡ Ù¾Ø³Ø± Û´ Ø³Ø§Ù„Ù‡ Ù…Ù†</p>
            <div class="mt-4 relative">
                <div class="absolute inset-0 flex items-center" aria-hidden="true">
                    <div class="w-full border-t border-purple-200"></div>
                </div>
                <div class="relative flex justify-center">
                    <span class="bg-purple-100 px-4 text-lg text-purple-700 rounded-full">
                        <i class="fas fa-child-reaching mr-2"></i>
                        Ø§Ù…Ø±ÙˆØ²: <span id="today-date" class="font-medium"></span>
                    </span>
                </div>
            </div>
        </header>

        <!-- Stats Overview -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
            <!-- Completed Activities -->
            <div class="bg-white rounded-xl shadow-md p-4 text-center">
                <div class="text-purple-600 mb-2">
                    <i class="fas fa-check-circle text-2xl"></i>
                </div>
                <h3 class="text-gray-500 text-sm">ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡</h3>
                <p class="text-2xl font-bold text-gray-800" id="completed-count">0</p>
            </div>
            <!-- Total Activities -->
            <div class="bg-white rounded-xl shadow-md p-4 text-center">
                <div class="text-blue-600 mb-2">
                    <i class="fas fa-list-check text-2xl"></i>
                </div>
                <h3 class="text-gray-500 text-sm">Ú©Ù„ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§</h3>
                <p class="text-2xl font-bold text-gray-800" id="total-count">0</p>
            </div>
            <!-- Mood Today -->
            <div class="bg-white rounded-xl shadow-md p-4 text-center">
                <div class="text-yellow-500 mb-2">
                    <i class="fas fa-smile text-2xl"></i>
                </div>
                <h3 class="text-gray-500 text-sm">Ø­Ø§Ù„Øª Ø§Ù…Ø±ÙˆØ²</h3>
                <p class="text-2xl font-bold text-gray-800" id="mood-today">Ø®ÙˆØ¨</p>
            </div>
            <!-- Progress -->
            <div class="bg-white rounded-xl shadow-md p-4 text-center">
                <div class="flex justify-center mb-2">
                    <div style="width: 50px; height: 50px;">
                        <svg class="progress-ring" width="50" height="50">
                            <circle class="progress-ring__circle" stroke="#8b5cf6" stroke-width="4" fill="transparent" r="20" cx="25" cy="25" stroke-linecap="round" />
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center" style="margin-top: -50px; height: 50px;">
                            <span id="progress-percent" class="text-xs font-bold text-purple-600">0%</span>
                        </div>
                    </div>
                </div>
                <h3 class="text-gray-500 text-sm">Ù¾ÛŒØ´Ø±ÙØª Ø±ÙˆØ²Ø§Ù†Ù‡</h3>
            </div>
        </div>

        <!-- Growth Tracking -->
        
        <!-- Vocabulary Tracking -->
        <div class="bg-white rounded-lg shadow p-4 mb-6">
            <h3 class="font-bold text-gray-800 mb-3 flex items-center">
                <i class="fas fa-language text-blue-500 ml-2"></i>
                Ú©Ù„Ù…Ø§Øª Ø¢Ù…ÙˆØ®ØªÙ‡ Ø´Ø¯Ù‡
            </h3>
            <div class="mb-3">
                <div class="flex">
                    <input type="text" id="new-word-input" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-sm" placeholder="Ú©Ù„Ù…Ù‡ Ø¬Ø¯ÛŒØ¯">
                    <button id="add-word-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg text-sm mr-2">
                        <i class="fas fa-plus ml-1"></i>Ø§ÙØ²ÙˆØ¯Ù†
                    </button>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-gray-200">
                            <th class="py-2 text-right">Ú©Ù„Ù…Ù‡</th>
                            <th class="py-2 text-center">ØªØ§Ø±ÛŒØ®</th>
                            <th class="py-2 text-center">Ù…Ø¯Øª ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ</th>
                        </tr>
                    </thead>
                    <tbody id="vocabulary-list">
                        <!-- Words will be added here -->
                    </tbody>
                </table>
            </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <!-- Weight Tracking -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-weight-scale text-green-600 ml-2"></i>
                    Ø«Ø¨Øª ÙˆØ²Ù†
                </h2>
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="font-medium text-gray-700">ÙˆØ²Ù† Ø³ÛŒØ¯ Ø³Ù…ÛŒØ± </h3>
                        <p class="text-2xl font-bold text-gray-800" id="current-weight">-</p>
                    </div>
                    <div class="relative">
                        <input type="number" id="weight-input" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500" min="0" max="100" step="0.1">
                        <span class="absolute left-3 top-2 text-gray-500">kg</span>
                    </div>
                    <button id="save-weight-btn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm">
                        <i class="fas fa-save ml-2"></i>Ø°Ø®ÛŒØ±Ù‡
                    </button>
                </div>
                <div class="mt-4 bg-gray-50 rounded-lg p-3">
                    <canvas id="weight-chart"></canvas>
                </div>
            </div>

            <!-- Height Tracking -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-ruler-vertical text-blue-600 ml-2"></i>
                    Ø«Ø¨Øª Ù‚Ø¯
                </h2>
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="font-medium text-gray-700">Ù‚Ø¯ Ø³ÛŒØ¯ Ø³Ù…ÛŒØ±</h3>
                        <p class="text-2xl font-bold text-gray-800" id="current-height">-</p>
                    </div>
                    <div class="relative">
                        <input type="number" id="height-input" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" min="0" max="200" step="0.5">
                        <span class="absolute left-3 top-2 text-gray-500">cm</span>
                    </div>
                    <button id="save-height-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm">
                        <i class="fas fa-save ml-2"></i>Ø°Ø®ÛŒØ±Ù‡
                    </button>
                </div>
                <div class="mt-4 bg-gray-50 rounded-lg p-3">
                    <canvas id="height-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- Activities Section -->
        <section class="mb-12">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl md:text-2xl font-bold text-gray-800">
                    <i class="fas fa-list-check text-purple-600 ml-2"></i>
                    ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡
                </h2>
                <button id="add-activity-btn" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm flex items-center">
                    <i class="fas fa-plus ml-2"></i>
                    Ø§ÙØ²ÙˆØ¯Ù† ÙØ¹Ø§Ù„ÛŒØª
                </button>
            </div>

            <!-- Activity Categories -->
            <div class="flex overflow-x-auto pb-2 mb-6 gap-2">
                <button class="category-btn px-4 py-2 rounded-full bg-purple-600 text-white text-sm whitespace-nowrap" data-category="all">Ù‡Ù…Ù‡ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§</button>
                <button class="category-btn px-4 py-2 rounded-full bg-white text-gray-700 shadow text-sm whitespace-nowrap" data-category="morning">ØµØ¨Ø­</button>
                <button class="category-btn px-4 py-2 rounded-full bg-white text-gray-700 shadow text-sm whitespace-nowrap" data-category="learning">ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ</button>
                <button class="category-btn px-4 py-2 rounded-full bg-white text-gray-700 shadow text-sm whitespace-nowrap" data-category="play">Ø¨Ø§Ø²ÛŒ</button>
                <button class="category-btn px-4 py-2 rounded-full bg-white text-gray-700 shadow text-sm whitespace-nowrap" data-category="food">ØºØ°Ø§</button>
                <button class="category-btn px-4 py-2 rounded-full bg-white text-gray-700 shadow text-sm whitespace-nowrap" data-category="sleep">Ø®ÙˆØ§Ø¨</button>
            </div>

            <!-- Activities Grid -->
            <div id="activities-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Activities will be added here by JavaScript -->
            </div>
        </section>

        <!-- Mood Tracker -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-8">
            <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-6">
                <i class="fas fa-smile-beam text-yellow-500 ml-2"></i>
                Ø­Ø§Ù„Øª Ø§Ù…Ø±ÙˆØ² Ø³ÛŒØ¯ Ø³Ù…ÛŒØ±
            </h2>
            <div class="grid grid-cols-2 sm:grid-cols-5 gap-4 text-center">
                <button class="mood-btn rounded-xl py-3 bg-rose-50 hover:bg-rose-100" data-mood="very_sad">
                    <i class="fas fa-sad-cry text-2xl text-rose-500 mb-1"></i>
                    <p class="text-xs text-gray-700">Ø®ÛŒÙ„ÛŒ Ù†Ø§Ø±Ø§Ø­Øª</p>
                </button>
                <button class="mood-btn rounded-xl py-3 bg-amber-50 hover:bg-amber-100" data-mood="sad">
                    <i class="fas fa-frown text-2xl text-amber-500 mb-1"></i>
                    <p class="text-xs text-gray-700">Ù†Ø§Ø±Ø§Ø­Øª</p>
                </button>
                <button class="mood-btn rounded-xl py-3 bg-blue-50 hover:bg-blue-100" data-mood="neutral">
                    <i class="fas fa-meh text-2xl text-blue-500 mb-1"></i>
                    <p class="text-xs text-gray-700">Ù…Ø¹Ù…ÙˆÙ„ÛŒ</p>
                </button>
                <button class="mood-btn rounded-xl py-3 bg-emerald-50 hover:bg-emerald-100 active" data-mood="happy">
                    <i class="fas fa-smile text-2xl text-emerald-500 mb-1"></i>
                    <p class="text-xs text-gray-700">Ø®ÙˆØ´Ø­Ø§Ù„</p>
                </button>
                <button class="mood-btn rounded-xl py-3 bg-purple-50 hover:bg-purple-100" data-mood="very_happy">
                    <i class="fas fa-laugh-squint text-2xl text-purple-500 mb-1"></i>
                    <p class="text-xs text-gray-700">Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ´Ø­Ø§Ù„</p>
                </button>
            </div>
        </section>

        <!-- Weekly Encouragement -->
        <section class="bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl shadow-md p-6 mb-8">
            <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-trophy text-yellow-600 ml-2"></i>
                Ø¯Ø³ØªØ§ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ù‡ÙØªÙ‡ Ú¯Ø°Ø´ØªÙ‡
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-white rounded-lg p-4 shadow-sm">
                    <h3 class="font-bold text-purple-700 mb-2">Ø´Ù…Ø§ Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯ÛŒØ¯ Ø¯Ø±:</h3>
                    <ul id="last-week-achievements" class="space-y-2 text-gray-700">
                        <!-- Last week's achievements will be added here -->
                        <li class="flex items-center">
                            <i class="fas fa-check-circle text-green-500 ml-2"></i>
                            ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø±Ù†Ú¯â€ŒÙ‡Ø§ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check-circle text-green-500 ml-2"></i>
                            Ù‡Ù…Ú©Ø§Ø±ÛŒ Ø®ÙˆØ¨ Ø¯Ø± Ø¬Ù…Ø¹ Ú©Ø±Ø¯Ù† Ø§Ø³Ø¨Ø§Ø¨â€ŒØ¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§
                        </li>
                    </ul>
                </div>
                <div class="bg-white rounded-lg p-4 shadow-sm">
                    <h3 class="font-bold text-purple-700 mb-2">Ù¾ÛŒØ§Ù… ØªØ´ÙˆÛŒÙ‚ÛŒ:</h3>
                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-3">
                        <p class="text-gray-800" id="encouragement-message">
                           Ø³ÛŒØ¯ Ø³Ù…ÛŒØ± Ø¬Ø§Ù†ØŒ ØªÙˆ ÙˆØ§Ù‚Ø¹Ø§ ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡ Ù‡Ø³ØªÛŒ! Ø§ÛŒÙ† Ù‡ÙØªÙ‡ Ø¯Ø± Ø¨Ø³ÛŒØ§Ø±ÛŒ Ø§Ø² Ú©Ø§Ø±Ù‡Ø§ Ù¾ÛŒØ´Ø±ÙØª Ú©Ø±Ø¯ÛŒ Ùˆ Ù…Ø§ Ø®ÛŒÙ„ÛŒ Ø¨Ù‡ ØªÙˆ Ø§ÙØªØ®Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…. â¤ï¸
                        </p>
                    </div>
                    <button id="new-encouragement-btn" class="mt-2 text-blue-600 hover:text-blue-800 text-sm">
                        <i class="fas fa-sync ml-2"></i>Ù¾ÛŒØ§Ù… Ø¬Ø¯ÛŒØ¯
                    </button>
                </div>
            </div>
        </section>

        <!-- Haircut Reminder -->
        <section class="bg-gradient-to-r from-amber-50 to-yellow-100 rounded-xl shadow-md p-6 mb-8">
            <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-cut text-amber-600 ml-2"></i>
                ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ú©ÙˆØªØ§Ù‡ÛŒ Ù…Ùˆ
            </h2>
            <div class="bg-white rounded-lg p-4 shadow-sm">
                <h3 class="font-bold text-amber-700 mb-2">Ø¢Ø®Ø±ÛŒÙ† Ú©ÙˆØªØ§Ù‡ÛŒ Ù…Ùˆ:</h3>
                <p id="last-haircut-date" class="text-gray-700 mb-4 text-lg"></p>
                <div id="haircut-status" class="p-3 rounded-lg"></div>
                <button id="update-haircut-btn" class="mt-4 bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg text-sm">
                    <i class="fas fa-edit ml-2"></i>Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ØªØ§Ø±ÛŒØ® Ú©ÙˆØªØ§Ù‡ÛŒ
                </button>
            </div>
        </section>

        <!-- Weekly Favorites -->
        <section class="bg-gradient-to-r from-pink-50 to-rose-100 rounded-xl shadow-md p-6 mb-8">
            <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-heart text-rose-600 ml-2"></i>
                Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‡ÙØªÚ¯ÛŒ
            </h2>
            <div class="bg-white rounded-lg p-4 shadow-sm">
                <h3 class="font-bold text-rose-700 mb-2">Ø¹Ù„Ø§Ù‚Ù‡ Ø³ÛŒØ¯ Ø³Ù…ÛŒØ± Ø§ÛŒÙ† Ù‡ÙØªÙ‡:</h3>
                <div id="current-week-favorite" class="p-3 bg-rose-50 rounded-lg mb-4">
                    <!-- Will be filled by JavaScript -->
                </div>
                <div class="mb-4">
                    <label for="favorite-input" class="block text-sm font-medium text-gray-700 mb-1">Ø¹Ù„Ø§Ù‚Ù‡ Ø¬Ø¯ÛŒØ¯ Ø§ÛŒÙ† Ù‡ÙØªÙ‡:</label>
                    <input type="text" id="favorite-input" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-rose-500 focus:border-rose-500">
                </div>
                <button id="save-favorite-btn" class="bg-rose-500 hover:bg-rose-600 text-white px-4 py-2 rounded-lg text-sm">
                    <i class="fas fa-save ml-2"></i>Ø°Ø®ÛŒØ±Ù‡ Ø¹Ù„Ø§Ù‚Ù‡
                </button>

                <div class="mt-6">
                    <h3 class="font-bold text-rose-700 mb-2">ØªØºÛŒÛŒØ±Ø§Øª Ù…Ø§Ù‡Ø§Ù†Ù‡:</h3>
                    <div id="monthly-favorites-summary" class="bg-white rounded-lg p-3 border border-rose-100">
                        <!-- Monthly summary will be added here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Weekly Calendar -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-8">
            <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-6">
                <i class="fas fa-calendar-days text-blue-500 ml-2"></i>
                Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÚ¯ÛŒ
            </h2>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="border-b border-gray-200">
                            <th class="py-2 text-gray-500 text-right">Ø³Ø§Ø¹Øª</th>
                            <th class="py-2 text-gray-500 text-center">Ø´Ù†Ø¨Ù‡</th>
                            <th class="py-2 text-gray-500 text-center">ÛŒÚ©Ø´Ù†Ø¨Ù‡</th>
                            <th class="py-2 text-gray-500 text-center">Ø¯ÙˆØ´Ù†Ø¨Ù‡</th>
                            <th class="py-2 text-gray-500 text-center">Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡</th>
                            <th class="py-2 text-gray-500 text-center">Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡</th>
                            <th class="py-2 text-gray-500 text-center">Ù¾Ù†Ø¬Ø´Ù†Ø¨Ù‡</th>
                            <th class="py-2 text-gray-500 text-center">Ø¬Ù…Ø¹Ù‡</th>
                        </tr>
                    </thead>
                    <tbody id="weekly-calendar">
                        <!-- Times will be added by JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="mt-4">
                <button id="add-weekly-btn" class="text-blue-600 hover:text-blue-800 text-sm flex items-center">
                    <i class="fas fa-plus ml-2"></i>
                    Ø§ÙØ²ÙˆØ¯Ù† ÙØ¹Ø§Ù„ÛŒØª Ø¨Ù‡ Ù‡ÙØªÙ‡
                </button>
            </div>
        </section>

        <!-- Milestones -->
        <section>
            <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-medal text-yellow-500 ml-2"></i>
                Ù…ÙˆÙÙ‚ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²
            </h2>
            <div class="bg-white rounded-xl shadow-md p-6">
                <div id="milestones-container" class="space-y-3">
                    <div class="flex items-start">
                        <div class="bg-amber-50 rounded-full p-2 flex-shrink-0">
                            <i class="fas fa-star text-amber-400"></i>
                        </div>
                        <div class="mr-3">
                            <p class="text-gray-800 font-medium">Ø§ÙˆÙ„ÛŒÙ† Ø±ÙˆØ² Ù†Ù‚Ø§Ø´ÛŒ Ø¨Ø¯ÙˆÙ† Ú©Ù…Ú©</p>
                            <p class="text-gray-500 text-sm">ØµØ¨Ø­ Ø³Ø§Ø¹Øª 10:30</p>
                        </div>
                    </div>
                    <!-- More milestones will be added here -->
                </div>
                <div class="mt-4">
                    <button id="add-milestone-btn" class="text-purple-600 hover:text-purple-800 text-sm flex items-center">
                        <i class="fas fa-plus ml-2"></i>
                        Ø§ÙØ²ÙˆØ¯Ù† Ù…ÙˆÙÙ‚ÛŒØª Ø¬Ø¯ÛŒØ¯
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- Add Activity Modal -->
    <div id="activity-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold text-gray-800">Ø§ÙØ²ÙˆØ¯Ù† ÙØ¹Ø§Ù„ÛŒØª Ø¬Ø¯ÛŒØ¯</h3>
                    <button id="close-modal-btn" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="activity-form">
                    <div class="mb-4">
                        <label for="activity-name" class="block text-sm font-medium text-gray-700 mb-1">Ù†Ø§Ù… ÙØ¹Ø§Ù„ÛŒØª</label>
                        <input type="text" id="activity-name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500" required>
                    </div>
                    <div class="mb-4">
                        <label for="activity-category" class="block text-sm font-medium text-gray-700 mb-1">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</label>
                        <select id="activity-category" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500" required>
                            <option value="morning">ØµØ¨Ø­</option>
                            <option value="learning">ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ</option>
                            <option value="play">Ø¨Ø§Ø²ÛŒ</option>
                            <option value="food">ØºØ°Ø§</option>
                            <option value="sleep">Ø®ÙˆØ§Ø¨</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label for="activity-time" class="block text-sm font-medium text-gray-700 mb-1">Ø²Ù…Ø§Ù†</label>
                        <input type="time" id="activity-time" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500" required>
                    </div>
                    <div class="mb-4">
                        <label for="activity-notes" class="block text-sm font-medium text-gray-700 mb-1">ØªÙˆØ¶ÛŒØ­Ø§Øª (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                        <textarea id="activity-notes" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500"></textarea>
                    </div>
                    <div class="flex justify-end gap-3">
                        <button type="button" id="cancel-activity-btn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Ø§Ù†ØµØ±Ø§Ù</button>
                        <button type="submit" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">Ø°Ø®ÛŒØ±Ù‡ ÙØ¹Ø§Ù„ÛŒØª</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Weekly Activity Modal -->
    <div id="weekly-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-xl max-w-md w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold text-gray-800">Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ ÙØ¹Ø§Ù„ÛŒØª Ù‡ÙØªÚ¯ÛŒ</h3>
                    <button id="close-weekly-modal-btn" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="weekly-form">
                    <div class="mb-4">
                        <label for="weekly-name" class="block text-sm font-medium text-gray-700 mb-1">Ù†Ø§Ù… ÙØ¹Ø§Ù„ÛŒØª</label>
                        <input type="text" id="weekly-name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div class="mb-4 grid grid-cols-2 gap-4">
                        <div>
                            <label for="weekly-day" class="block text-sm font-medium text-gray-700 mb-1">Ø±ÙˆØ² Ù‡ÙØªÙ‡</label>
                            <select id="weekly-day" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                                <option value="0">Ø´Ù†Ø¨Ù‡</option>
                                <option value="1">ÛŒÚ©Ø´Ù†Ø¨Ù‡</option>
                                <option value="2">Ø¯ÙˆØ´Ù†Ø¨Ù‡</option>
                                <option value="3">Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡</option>
                                <option value="4">Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡</option>
                                <option value="5">Ù¾Ù†Ø¬Ø´Ù†Ø¨Ù‡</option>
                                <option value="6">Ø¬Ù…Ø¹Ù‡</option>
                            </select>
                        </div>
                        <div>
                            <label for="weekly-time" class="block text-sm font-medium text-gray-700 mb-1">Ø²Ù…Ø§Ù†</label>
                            <input type="time" id="weekly-time" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label for="weekly-category" class="block text-sm font-medium text-gray-700 mb-1">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</label>
                        <select id="weekly-category" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                            <option value="morning">ØµØ¨Ø­</option>
                            <option value="learning">ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ</option>
                            <option value="play">Ø¨Ø§Ø²ÛŒ</option>
                            <option value="food">ØºØ°Ø§</option>
                            <option value="sleep">Ø®ÙˆØ§Ø¨</option>
                        </select>
                    </div>
                    <div class="flex justify-end gap-3">
                        <button type="button" id="cancel-weekly-btn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Ø§Ù†ØµØ±Ø§Ù</button>
                        <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Ø°Ø®ÛŒØ±Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Haircut Update Modal -->
    <div id="haircut-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-xl max-w-md w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold text-gray-800">Ø«Ø¨Øª ØªØ§Ø±ÛŒØ® Ú©ÙˆØªØ§Ù‡ÛŒ Ù…Ùˆ</h3>
                    <button id="close-haircut-modal-btn" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="haircut-form">
                    <div class="mb-4">
                        <label for="haircut-date" class="block text-sm font-medium text-gray-700 mb-1">ØªØ§Ø±ÛŒØ® Ú©ÙˆØªØ§Ù‡ÛŒ</label>
                        <input type="date" id="haircut-date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" required>
                    </div>
                    <div class="flex justify-end gap-3">
                        <button type="button" id="cancel-haircut-btn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Ø§Ù†ØµØ±Ø§Ù</button>
                        <button type="submit" class="px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600">Ø°Ø®ÛŒØ±Ù‡ ØªØ§Ø±ÛŒØ®</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Milestone Modal -->
    <div id="milestone-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-xl max-w-md w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold text-gray-800">Ø«Ø¨Øª Ù…ÙˆÙÙ‚ÛŒØª Ø¬Ø¯ÛŒØ¯</h3>
                    <button id="close-milestone-modal-btn" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="milestone-form">
                    <div class="mb-4">
                        <label for="milestone-text" class="block text-sm font-medium text-gray-700 mb-1">Ø¹Ù†ÙˆØ§Ù† Ù…ÙˆÙÙ‚ÛŒØª</label>
                        <input type="text" id="milestone-text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500" required>
                    </div>
                    <div class="mb-4">
                        <label for="milestone-time" class="block text-sm font-medium text-gray-700 mb-1">Ø²Ù…Ø§Ù†</label>
                        <input type="time" id="milestone-time" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500" required>
                    </div>
                    <div class="flex justify-end gap-3">
                        <button type="button" id="cancel-milestone-btn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Ø§Ù†ØµØ±Ø§Ù</button>
                        <button type="submit" class="px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600">Ø°Ø®ÛŒØ±Ù‡ Ù…ÙˆÙÙ‚ÛŒØª</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Today's date in Persian
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('today-date').textContent = today.toLocaleDateString('fa-IR', options);
            
            // Sample activities data
            const activitiesData = [
                {
                    id: 1,
                    name: "ØµØ¨Ø­Ø§Ù†Ù‡ Ø®ÙˆØ±Ø¯Ù†",
                    category: "morning",
                    time: "08:00",
                    completed: false,
                    notes: "Ø´ÛŒØ± Ø¨Ø§ Ú©ÙˆØ±Ù† ÙÙ„Ú©Ø³ Ø®ÙˆØ±Ø¯"
                },
                {
                    id: 2,
                    name: "ØªÙ…Ø§Ø´Ø§ÛŒ Ú©Ø§Ø±ØªÙˆÙ† Ø¢Ù…ÙˆØ²Ø´ÛŒ",
                    category: "learning",
                    time: "09:30",
                    completed: true,
                    notes: "Ú©Ø§Ø±ØªÙˆÙ† Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø¯ÛŒØ¯"
                },
                {
                    id: 3,
                    name: "Ø¨Ø§Ø²ÛŒ Ø¨Ø§ Ù„Ú¯Ùˆ",
                    category: "play",
                    time: "10:00",
                    completed: true,
                    notes: "Ø¨Ø±Ø¬ Ø¨Ù„Ù†Ø¯ÛŒ Ø³Ø§Ø®Øª"
                },
                {
                    id: 4,
                    name: "Ù†Ø§Ù‡Ø§Ø±",
                    category: "food",
                    time: "12:30",
                    completed: false,
                    notes: ""
                },
                {
                    id: 5,
                    name: "Ø®ÙˆØ§Ø¨ Ù†ÛŒÙ…Ø±ÙˆØ²",
                    category: "sleep",
                    time: "13:30",
                    completed: false,
                    notes: ""
                },
                {
                    id: 6,
                    name: "Ø±Ù†Ú¯â€ŒØ¢Ù…ÛŒØ²ÛŒ",
                    category: "learning",
                    time: "15:30",
                    completed: false,
                    notes: ""
                }
            ];
            
            let currentActivities = [...activitiesData];
            let currentCategory = 'all';
            let currentMood = 'happy';
            
            // Render activities
            function renderActivities() {
                const container = document.getElementById('activities-container');
                container.innerHTML = '';
                
                const filteredActivities = currentCategory === 'all' 
                    ? currentActivities 
                    : currentActivities.filter(activity => activity.category === currentCategory);
                
                document.getElementById('total-count').textContent = currentActivities.length;
                const completedCount = currentActivities.filter(activity => activity.completed).length;
                document.getElementById('completed-count').textContent = completedCount;
                
                // Update progress circle
                const progress = (completedCount / currentActivities.length) * 100;
                updateProgressCircle(progress);
                
                if (filteredActivities.length === 0) {
                    container.innerHTML = `
                        <div class="col-span-full text-center py-8 text-gray-500">
                            <i class="fas fa-inbox text-3xl mb-2"></i>
                            <p>Ù‡Ù†ÙˆØ² ÙØ¹Ø§Ù„ÛŒØªÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
                        </div>
                    `;
                    return;
                }
                
                filteredActivities.forEach(activity => {
                    const categoryNames = {
                        'morning': 'ØµØ¨Ø­',
                        'learning': 'ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ',
                        'play': 'Ø¨Ø§Ø²ÛŒ',
                        'food': 'ØºØ°Ø§',
                        'sleep': 'Ø®ÙˆØ§Ø¨'
                    };
                    
                    const categoryColors = {
                        'morning': 'bg-blue-100 text-blue-800',
                        'learning': 'bg-green-100 text-green-800',
                        'play': 'bg-purple-100 text-purple-800',
                        'food': 'bg-amber-100 text-amber-800',
                        'sleep': 'bg-indigo-100 text-indigo-800'
                    };
                    
                    container.innerHTML += `
                        <div class="activity-card bg-white rounded-xl shadow-md p-5 transition-all duration-300 ${activity.completed ? 'border-r-4 border-green-500' : ''}">
                            <div class="flex justify-between items-start mb-3">
                                <span class="text-xs px-2 py-1 rounded-full ${categoryColors[activity.category]}">
                                    ${categoryNames[activity.category]}
                                </span>
                                <button class="toggle-complete-btn" data-id="${activity.id}">
                                    <i class="fas ${activity.completed ? 'fa-check-circle text-green-500' : 'fa-circle text-gray-300'} text-xl"></i>
                                </button>
                            </div>
                            <h3 class="font-bold text-gray-800 mb-1">${activity.name}</h3>
                            <p class="text-gray-500 text-sm mb-3">
                                <i class="far fa-clock ml-1"></i>
                                ${activity.time}
                            </p>
                            ${activity.notes ? `<p class="text-sm text-gray-600 bg-gray-50 p-2 rounded-lg">${activity.notes}</p>` : ''}
                        </div>
                    `;
                });
            }
            
            // Update progress circle
            function updateProgressCircle(percent) {
                const circle = document.querySelector('.progress-ring__circle');
                const radius = 20;
                const circumference = radius * 2 * Math.PI;
                const offset = circumference - (percent / 100 * circumference);
                
                circle.style.strokeDasharray = `${circumference} ${circumference}`;
                circle.style.strokeDashoffset = offset;
                
                document.getElementById('progress-percent').textContent = `${Math.round(percent)}%`;
            }
            
            // Mood buttons
            document.querySelectorAll('.mood-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const moodNames = {
                        'very_sad': 'Ø®ÛŒÙ„ÛŒ Ù†Ø§Ø±Ø§Ø­Øª',
                        'sad': 'Ù†Ø§Ø±Ø§Ø­Øª',
                        'neutral': 'Ù…Ø¹Ù…ÙˆÙ„ÛŒ',
                        'happy': 'Ø®ÙˆØ¨',
                        'very_happy': 'Ø¹Ø§Ù„ÛŒ'
                    };
                    
                    currentMood = moodNames[this.getAttribute('data-mood')];
                    document.getElementById('mood-today').textContent = currentMood;
                });
            });
            
            // Category filter buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.category-btn').forEach(b => {
                        b.classList.remove('bg-purple-600', 'text-white');
                        b.classList.add('bg-white', 'text-gray-700', 'shadow');
                    });
                    
                    this.classList.add('bg-purple-600', 'text-white');
                    this.classList.remove('bg-white', 'text-gray-700', 'shadow');
                    
                    currentCategory = this.getAttribute('data-category');
                    renderActivities();
                });
            });
            
            // Toggle activity completion
            document.addEventListener('click', function(e) {
                if (e.target.closest('.toggle-complete-btn')) {
                    const btn = e.target.closest('.toggle-complete-btn');
                    const id = parseInt(btn.getAttribute('data-id'));
                    
                    currentActivities = currentActivities.map(activity => {
                        if (activity.id === id) {
                            return {...activity, completed: !activity.completed};
                        }
                        return activity;
                    });
                    
                    renderActivities();
                }
            });
            
            // Modal handling
            const modal = document.getElementById('activity-modal');
            const addBtn = document.getElementById('add-activity-btn');
            const closeBtn = document.getElementById('close-modal-btn');
            const cancelBtn = document.getElementById('cancel-activity-btn');
            const form = document.getElementById('activity-form');
            
            addBtn.addEventListener('click', () => modal.classList.remove('hidden'));
            closeBtn.addEventListener('click', () => modal.classList.add('hidden'));
            cancelBtn.addEventListener('click', () => modal.classList.add('hidden'));
            
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const newActivity = {
                    id: Date.now(),
                    name: document.getElementById('activity-name').value,
                    category: document.getElementById('activity-category').value,
                    time: document.getElementById('activity-time').value,
                    completed: false,
                    notes: document.getElementById('activity-notes').value
                };
                
                currentActivities.push(newActivity);
                renderActivities();
                
                this.reset();
                modal.classList.add('hidden');
            });
            
            // Milestone modal handling
            const milestoneModal = document.getElementById('milestone-modal');
            const addMilestoneBtn = document.getElementById('add-milestone-btn');
            const closeMilestoneBtn = document.getElementById('close-milestone-modal-btn');
            const cancelMilestoneBtn = document.getElementById('cancel-milestone-btn');
            const milestoneForm = document.getElementById('milestone-form');
            
            addMilestoneBtn.addEventListener('click', () => milestoneModal.classList.remove('hidden'));
            closeMilestoneBtn.addEventListener('click', () => milestoneModal.classList.add('hidden'));
            cancelMilestoneBtn.addEventListener('click', () => milestoneModal.classList.add('hidden'));
            
            milestoneForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const milestoneText = document.getElementById('milestone-text').value;
                const milestoneTime = document.getElementById('milestone-time').value;
                
                const milestoneElement = document.createElement('div');
                milestoneElement.className = 'flex items-start';
                milestoneElement.innerHTML = `
                    <div class="bg-amber-50 rounded-full p-2 flex-shrink-0">
                        <i class="fas fa-star text-amber-400"></i>
                    </div>
                    <div class="mr-3">
                        <p class="text-gray-800 font-medium">${milestoneText}</p>
                        <p class="text-gray-500 text-sm">Ø³Ø§Ø¹Øª ${milestoneTime}</p>
                    </div>
                `;
                
                document.getElementById('milestones-container').prepend(milestoneElement);
                
                this.reset();
                milestoneModal.classList.add('hidden');
            });
            
            // Weekly calendar setup
            function initWeeklyCalendar() {
                const startHour = 8;
                const endHour = 20;
                const container = document.getElementById('weekly-calendar');
                
                for (let hour = startHour; hour <= endHour; hour++) {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-gray-100 hover:bg-gray-50';
                    
                    // Add time cell
                    const timeCell = document.createElement('td');
                    timeCell.className = 'py-2 text-gray-500 text-sm w-16 text-right pr-4';
                    timeCell.textContent = `${hour}:00`;
                    row.appendChild(timeCell);
                    
                    // Add day cells
                    for (let day = 0; day < 7; day++) {
                        const dayCell = document.createElement('td');
                        dayCell.className = 'p-1';
                        dayCell.dataset.day = day;
                        dayCell.dataset.hour = hour;
                        
                        const cellContent = document.createElement('div');
                        cellContent.className = 'h-16 border border-gray-200 rounded flex items-center justify-center cursor-pointer hover:bg-blue-50 min-w-[50px]';
                        cellContent.addEventListener('click', () => {
                            document.getElementById('weekly-day').value = day;
                            document.getElementById('weekly-time').value = `${hour.toString().padStart(2, '0')}:00`;
                            weeklyModal.classList.remove('hidden');
                        });
                        
                        dayCell.appendChild(cellContent);
                        row.appendChild(dayCell);
                    }
                    
                    container.appendChild(row);
                }
            }
            
            // Weekly modal handling
            const weeklyModal = document.getElementById('weekly-modal');
            const addWeeklyBtn = document.getElementById('add-weekly-btn');
            const closeWeeklyBtn = document.getElementById('close-weekly-modal-btn');
            const cancelWeeklyBtn = document.getElementById('cancel-weekly-btn');
            const weeklyForm = document.getElementById('weekly-form');
            
            addWeeklyBtn.addEventListener('click', () => weeklyModal.classList.remove('hidden'));
            closeWeeklyBtn.addEventListener('click', () => weeklyModal.classList.add('hidden'));
            cancelWeeklyBtn.addEventListener('click', () => weeklyModal.classList.add('hidden'));
            
            weeklyForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const newActivity = {
                    name: document.getElementById('weekly-name').value,
                    category: document.getElementById('weekly-category').value,
                    day: parseInt(document.getElementById('weekly-day').value),
                    time: document.getElementById('weekly-time').value
                };
                
                // Add to corresponding day/time in the calendar
                const dayCells = document.querySelectorAll(`td[data-day="${newActivity.day}"]`);
                dayCells.forEach(cell => {
                    if (cell.dataset.hour === newActivity.time.split(':')[0]) {
                        cell.querySelector('div').innerHTML = `
                            <div class="p-1 text-xs text-center">
                                <span class="block font-medium truncate">${newActivity.name}</span>
                                <span class="text-gray-500 text-[10px]">${newActivity.time}</span>
                            </div>
                        `;
                    }
                });
                
                this.reset();
                weeklyModal.classList.add('hidden');
            });

            // Weekly encouragement messages
            const encouragementMessages = [
                "Ø³ÛŒØ¯ Ø¬Ø§Ù†ØŒ ØªÙˆ ÙˆØ§Ù‚Ø¹Ø§ ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡ Ù‡Ø³ØªÛŒ! Ø§ÛŒÙ† Ù‡ÙØªÙ‡ Ø¯Ø± Ø¨Ø³ÛŒØ§Ø±ÛŒ Ø§Ø² Ú©Ø§Ø±Ù‡Ø§ Ù¾ÛŒØ´Ø±ÙØª Ú©Ø±Ø¯ÛŒ Ùˆ Ù…Ø§ Ø®ÛŒÙ„ÛŒ Ø¨Ù‡ ØªÙˆ Ø§ÙØªØ®Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…. â¤ï¸",
                "Ù¾Ø³Ø± Ø²Ø±Ù†Ú¯ Ù…Ù†! Ø´Ø§Ù‡Ø¯ Ù¾ÛŒØ´Ø±ÙØª Ø±ÙˆØ²Ø§ÙØ²ÙˆÙ† ØªÙˆ Ù‡Ø³ØªÛŒÙ… Ùˆ Ø§Ø² ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ÛŒØª Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ´Ø­Ø§Ù„ÛŒÙ…. ğŸ˜Š",
                "Ø¢ÙØ±ÛŒÙ† Ø¨Ù‡ ØªÙˆ! Ù‡Ø± Ø±ÙˆØ² Ø¨Ù‡ØªØ± Ø§Ø² Ø¯ÛŒØ±ÙˆØ² Ù…ÛŒâ€ŒØ´ÙˆÛŒ Ùˆ Ø§ÛŒÙ† Ù…Ø§ Ø±Ø§ Ø¨Ø³ÛŒØ§Ø± Ø®ÙˆØ´Ø­Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. ğŸŒŸ",
                "Ú†Ù‡ Ù‡ÙØªÙ‡ Ù¾Ø±Ú©Ø§Ø±ÛŒ Ø¯Ø§Ø´ØªÛŒ! ØªÙˆ Ø§Ø³ØªØ¹Ø¯Ø§Ø¯Ù‡Ø§ÛŒ Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø§Ø±ÛŒ Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ Ø¨Ù‡ Ù‡Ø± Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒ Ø¨Ø±Ø³ÛŒ. ğŸ’ª",
                "Ù…Ø§ Ø¨Ù‡ Ø³Ø®ØªÚ©ÙˆØ´ÛŒ Ùˆ Ù¾ÛŒØ´Ø±ÙØª ØªÙˆ Ø§ÙØªØ®Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…. Ù‡Ù…ÛŒÙ†Ø·ÙˆØ± Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡ Ù¾Ø³Ø± Ú¯Ù„Ù…! ğŸ†"
            ];

            // Last week's achievements
            const lastWeekAchievements = [
                "ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø±Ù†Ú¯â€ŒÙ‡Ø§ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ",
                "Ù‡Ù…Ú©Ø§Ø±ÛŒ Ø®ÙˆØ¨ Ø¯Ø± Ø¬Ù…Ø¹ Ú©Ø±Ø¯Ù† Ø§Ø³Ø¨Ø§Ø¨â€ŒØ¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§", 
                "Ú©Ù…Ú© Ø¯Ø± Ú†ÛŒØ¯Ù† Ù…ÛŒØ² ØµØ¨Ø­Ø§Ù†Ù‡",
                "Ø±Ø³Ù… Ø´Ú©Ù„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯",
                "Ø¨Ù‡Ø¨ÙˆØ¯ Ø¯Ø± Ú©Ù†ØªØ±Ù„ Ø§Ø­Ø³Ø§Ø³Ø§Øª",
                "Ø¢ÙˆØ§Ø² Ø®ÙˆØ§Ù†Ø¯Ù† Ø´Ø¹Ø±Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯"
            ];

            function getRandomEncouragement() {
                const randomIndex = Math.floor(Math.random() * encouragementMessages.length);
                return encouragementMessages[randomIndex];
            }

            function getRandomAchievements(count = 3) {
                const shuffled = [...lastWeekAchievements].sort(() => 0.5 - Math.random());
                return shuffled.slice(0, count);
            }

            function renderEncouragementSection() {
                document.getElementById('encouragement-message').textContent = getRandomEncouragement();
                
                const achievementsContainer = document.getElementById('last-week-achievements');
                achievementsContainer.innerHTML = '';
                
                getRandomAchievements().forEach(achievement => {
                    const li = document.createElement('li');
                    li.className = 'flex items-center';
                    li.innerHTML = `
                        <i class="fas fa-check-circle text-green-500 ml-2"></i>
                        ${achievement}
                    `;
                    achievementsContainer.appendChild(li);
                });
            }

            document.getElementById('new-encouragement-btn').addEventListener('click', renderEncouragementSection);

            // Haircut reminder functionality
            function checkHaircutReminder() {
                const lastHaircut = localStorage.getItem('lastHaircut');
                const haircutDate = lastHaircut ? new Date(lastHaircut) : new Date();
                const today = new Date();
                const diffDays = Math.floor((today - haircutDate) / (1000 * 60 * 60 * 24));
                
                document.getElementById('last-haircut-date').textContent = 
                    haircutDate.toLocaleDateString('fa-IR');
                
                const statusDiv = document.getElementById('haircut-status');
                if (diffDays >= 15) {
                    statusDiv.className = 'p-3 rounded-lg bg-red-100 text-red-800';
                    statusDiv.innerHTML = `
                        <i class="fas fa-exclamation-triangle ml-2"></i>
                        Ø²Ù…Ø§Ù† Ú©ÙˆØªØ§Ù‡ÛŒ Ù…Ùˆ Ø±Ø³ÛŒØ¯Ù‡ Ø§Ø³Øª! (${diffDays} Ø±ÙˆØ² Ú¯Ø°Ø´ØªÙ‡)
                    `;
                } else {
                    statusDiv.className = 'p-3 rounded-lg bg-green-100 text-green-800';
                    statusDiv.innerHTML = `
                        <i class="fas fa-check-circle ml-2"></i>
                        ${15 - diffDays} Ø±ÙˆØ² ØªØ§ Ú©ÙˆØªØ§Ù‡ÛŒ Ø¨Ø¹Ø¯ÛŒ Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡
                    `;
                }
            }

            // Haircut modal handling
            const haircutModal = document.getElementById('haircut-modal');
            const updateHaircutBtn = document.getElementById('update-haircut-btn');
            const closeHaircutBtn = document.getElementById('close-haircut-modal-btn');
            const cancelHaircutBtn = document.getElementById('cancel-haircut-btn');
            const haircutForm = document.getElementById('haircut-form');

            updateHaircutBtn.addEventListener('click', () => haircutModal.classList.remove('hidden'));
            closeHaircutBtn.addEventListener('click', () => haircutModal.classList.add('hidden'));
            cancelHaircutBtn.addEventListener('click', () => haircutModal.classList.add('hidden'));

            haircutForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const haircutDate = document.getElementById('haircut-date').value;
                localStorage.setItem('lastHaircut', haircutDate);
                checkHaircutReminder();
                haircutModal.classList.add('hidden');
            });

            // Set default date if not set
            if (!localStorage.getItem('lastHaircut')) {
                const today = new Date();
                const defaultDate = new Date(today.setDate(today.getDate() - 14));
                localStorage.setItem('lastHaircut', defaultDate.toISOString().split('T')[0]);
            }

            // Weekly Favorites Functionality
            function updateFavoritesDisplay() {
                const favorites = JSON.parse(localStorage.getItem('weeklyFavorites') || '{}');
                const currentWeek = getCurrentWeekNumber();
                
                // Show current week's favorite
                const currentFavoriteDiv = document.getElementById('current-week-favorite');
                if (favorites[currentWeek]) {
                    currentFavoriteDiv.innerHTML = `
                        <p class="font-medium text-rose-700">${favorites[currentWeek]}</p>
                        <p class="text-xs text-gray-500 mt-1">Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø¯Ø± Ù‡ÙØªÙ‡ ${currentWeek}</p>
                    `;
                } else {
                    currentFavoriteDiv.innerHTML = `
                        <p class="text-gray-500">Ù‡Ù†ÙˆØ² Ø¹Ù„Ø§Ù‚Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù‡ÙØªÙ‡ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡</p>
                    `;
                }
                
                // Generate monthly summary
                const monthlySummaryDiv = document.getElementById('monthly-favorites-summary');
                monthlySummaryDiv.innerHTML = '';
                
                const thisMonth = new Date().getMonth();
                const thisYear = new Date().getFullYear();
                
                Object.entries(favorites).forEach(([week, favorite]) => {
                    const weekNum = parseInt(week.split('-')[1]);
                    const year = parseInt(week.split('-')[0]);
                    
                    if (year === thisYear && weekNum % 4 === 0) { // Every 4 weeks = monthly
                        const monthSummary = document.createElement('div');
                        monthSummary.className = 'mb-4 pb-4 border-b border-rose-50 last:border-0 last:mb-0';
                        
                        const monthName = new Date(thisYear, thisMonth, 1).toLocaleDateString('fa-IR', { month: 'long' });
                        monthSummary.innerHTML = `
                            <h4 class="font-bold text-rose-600 mb-2">${monthName}</h4>
                        `;
                        
                        // Add weekly favorites
                        const favoritesList = document.createElement('div');
                        for (let w = weekNum - 3; w <= weekNum; w++) {
                            const weekKey = `${thisYear}-${w}`;
                            if (favorites[weekKey]) {
                                favoritesList.innerHTML += `
                                    <div class="flex items-start mb-1">
                                        <i class="fas fa-circle text-xs text-rose-300 mt-1 ml-2"></i>
                                        <div>
                                            <p class="text-sm">Ù‡ÙØªÙ‡ ${w}: ${favorites[weekKey]}</p>
                                        </div>
                                    </div>
                                `;
                            }
                        }
                        monthSummary.appendChild(favoritesList);
                        monthlySummaryDiv.appendChild(monthSummary);
                    }
                });
            }

            // Helper function to get current week number
            function getCurrentWeekNumber() {
                const now = new Date();
                const firstDayOfYear = new Date(now.getFullYear(), 0, 1);
                const pastDaysOfYear = (now - firstDayOfYear) / 86400000;
                return `${now.getFullYear()}-${Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7)}`;
            }

            // Save favorite button
            document.getElementById('save-favorite-btn').addEventListener('click', function() {
                const favoriteText = document.getElementById('favorite-input').value.trim();
                if (favoriteText) {
                    const currentWeek = getCurrentWeekNumber();
                    const favorites = JSON.parse(localStorage.getItem('weeklyFavorites') || '{}');
                    favorites[currentWeek] = favoriteText;
                    localStorage.setItem('weeklyFavorites', JSON.stringify(favorites));
                    
                    document.getElementById('favorite-input').value = '';
                    updateFavoritesDisplay();
                }
            });

            // Initial render
            renderActivities();
            initWeeklyCalendar();
            renderEncouragementSection();
            checkHaircutReminder();
            updateFavoritesDisplay();

            // Weight and Height Tracking
            function loadGrowthData() {
                const weightData = JSON.parse(localStorage.getItem('weightData') || '[]');
                const heightData = JSON.parse(localStorage.getItem('heightData') || '[]');

                // Update current values display
                if (weightData.length) {
                    document.getElementById('current-weight').textContent = 
                        `${weightData[weightData.length - 1].value} kg`;
                }
                if (heightData.length) {
                    document.getElementById('current-height').textContent = 
                        `${heightData[heightData.length - 1].value} cm`;
                }

                // Render charts
                renderGrowthChart('weight-chart', weightData, 'ÙˆØ²Ù† (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…)', 'rgba(22, 163, 74, 0.8)');
                renderGrowthChart('height-chart', heightData, 'Ù‚Ø¯ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±)', 'rgba(59, 130, 246, 0.8)');
            }

            function renderGrowthChart(canvasId, data, label, bgColor) {
                const ctx = document.getElementById(canvasId).getContext('2d');
                const dates = data.map(item => {
                    const date = new Date(item.date);
                    return date.toLocaleDateString('fa-IR', { month: 'short', day: 'numeric' });
                });
                const values = data.map(item => item.value);

                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: dates,
                        datasets: [{
                            label: label,
                            data: values,
                            borderColor: bgColor,
                            backgroundColor: bgColor.replace('0.8', '0.2'),
                            borderWidth: 2,
                            tension: 0.1,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false
                            }
                        }
                    }
                });
            }

            // Save weight button
            document.getElementById('save-weight-btn').addEventListener('click', function() {
                const weightInput = document.getElementById('weight-input');
                const weight = parseFloat(weightInput.value);
                
                if (weight && !isNaN(weight)) {
                    const weightData = JSON.parse(localStorage.getItem('weightData') || '[]');
                    weightData.push({
                        date: new Date().toISOString(),
                        value: weight
                    });
                    localStorage.setItem('weightData', JSON.stringify(weightData));
                    weightInput.value = '';
                    loadGrowthData();
                }
            });

            // Save height button
            document.getElementById('save-height-btn').addEventListener('click', function() {
                const heightInput = document.getElementById('height-input');
                const height = parseFloat(heightInput.value);
                
                if (height && !isNaN(height)) {
                    const heightData = JSON.parse(localStorage.getItem('heightData') || '[]');
                    heightData.push({
                        date: new Date().toISOString(),
                        value: height
                    });
                    localStorage.setItem('heightData', JSON.stringify(heightData));
                    heightInput.value = '';
                    loadGrowthData();
                }
            });

            // Vocabulary Tracking
            function loadVocabularyData() {
                const vocabData = JSON.parse(localStorage.getItem('vocabularyData') || '[]');
                const listElement = document.getElementById('vocabulary-list');
                listElement.innerHTML = '';

                if (vocabData.length === 0) {
                    listElement.innerHTML = `
                        <tr>
                            <td colspan="4" class="py-4 text-center text-gray-500">Ù‡ÛŒÚ† Ú©Ù„Ù…Ù‡â€ŒØ§ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td>
                        </tr>
                    `;
                    document.getElementById('avg-mastery-time').textContent = '-';
                    return;
                }

                let totalDays = 0;
                let masteredCount = 0;

                vocabData.forEach(word => {
                    const learnedDate = new Date(word.learnedDate);
                    const learnedDateStr = learnedDate.toLocaleDateString('fa-IR');
                    
                    let masteryDateStr = '-';
                    let daysToMaster = '-';
                    
                    if (word.masteredDate) {
                        const masteredDate = new Date(word.masteredDate);
                        masteryDateStr = masteredDate.toLocaleDateString('fa-IR');
                        daysToMaster = Math.round((masteredDate - learnedDate) / (1000 * 60 * 60 * 24));
                        totalDays += daysToMaster;
                        masteredCount++;
                    }

                    const row = document.createElement('tr');
                    row.className = 'border-b border-gray-100 hover:bg-gray-50';
                    row.innerHTML = `
                        <td class="py-2 text-right font-medium">${word.word}</td>
                        <td class="py-2 text-center">${learnedDateStr}</td>
                        <td class="py-2 text-center">${masteryDateStr}</td>
                        <td class="py-2 text-center">${daysToMaster}</td>
                    `;
                    listElement.appendChild(row);
                });

                if (masteredCount > 0) {
                    const avgDays = Math.round(totalDays / masteredCount);
                    document.getElementById('avg-mastery-time').textContent = avgDays;
                }
            }

            document.getElementById('add-word-btn').addEventListener('click', function() {
                const wordInput = document.getElementById('new-word-input');
                const word = wordInput.value.trim();
                
                if (word) {
                    const vocabData = JSON.parse(localStorage.getItem('vocabularyData') || '[]');
                    vocabData.push({
                        word: word,
                        learnedDate: new Date().toISOString(),
                        masteredDate: null
                    });
                    localStorage.setItem('vocabularyData', JSON.stringify(vocabData));
                    wordInput.value = '';
                    loadVocabularyData();
                }
            });

            // Mark words as mastered
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('mark-mastered-btn')) {
                    const word = e.target.closest('tr').querySelector('td').textContent;
                    const vocabData = JSON.parse(localStorage.getItem('vocabularyData') || '[]');
                    
                    const updatedData = vocabData.map(item => {
                        if (item.word === word && !item.masteredDate) {
                            return {...item, masteredDate: new Date().toISOString()};
                        }
                        return item;
                    });
                    
                    localStorage.setItem('vocabularyData', JSON.stringify(updatedData));
                    loadVocabularyData();
                }
            });

            // Initial load
            loadGrowthData();
            loadVocabularyData();
        });
    </script>
</body>
</html>
